<script lang="ts" setup>
import LoadingComponent from '@/base_components/ui/loaders/LoadingComponent.vue';
import ErrorComponent from '@/base_components/utilities/ErrorComponent.vue';
import { defineAsyncComponent } from 'vue';

const VulnPoliciesList = defineAsyncComponent({
    loader: () => import('./vulnerability/VulnerabilityPolicyList.vue'),
    loadingComponent: LoadingComponent,
    delay: 200,
    errorComponent: ErrorComponent,
    timeout: 3000
});

const VulnPoliciesCreate = defineAsyncComponent({
    loader: () => import('./vulnerability/VulnerabilityPolicyCreate.vue'),
    loadingComponent: LoadingComponent,
    delay: 200,
    errorComponent: ErrorComponent,
    timeout: 3000
});

const VulnPoliciesEdit = defineAsyncComponent({
    loader: () => import('./vulnerability/VulnerabilityPolicyEdit.vue'),
    loadingComponent: LoadingComponent,
    delay: 200,
    errorComponent: ErrorComponent,
    timeout: 3000
});

defineProps<{
    page: string;
    orgId: string;
    action?: string;
}>();
</script>
<template>
    <VulnPoliciesList v-if="action === 'manage' || !action" :page="page" :org-id="orgId" />
    <VulnPoliciesCreate v-else-if="action === 'add'" :page="page" :org-id="orgId" />
    <VulnPoliciesEdit v-else-if="action === 'edit'" :page="page" :org-id="orgId" />
</template>
